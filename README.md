# 数を作る計算機

このアプリケーションは、ユーザーが指定したターゲットナンバー（作りたい数字）を、入力された4つの数字と四則演算子（+、-、×、÷）を組み合わせて作る計算機です。ユーザーはログインすることで、自分の過去の計算履歴を保存・閲覧することができます。

## 特徴

- **ターゲットナンバーの指定**: ユーザーが作りたい数字を自由に指定できます。
- **4つの数字を使用**: ユーザーが入力した4つの数字を使用して計算を行います。
- **四則演算の組み合わせ**: +、-、×、÷の四則演算子を組み合わせて計算式を生成します。
- **計算結果の表示**: 作成可能な計算式の数と、実際の計算式を一覧で表示します。
- **計算式の表示**: 計算式は見やすくフォーマットされ、必要に応じてスクロールして閲覧できます。
- **ユーザー認証機能**: ユーザー登録、ログイン、ログアウト機能を備えています。
- **計算履歴の保存**: ログインしたユーザーごとに、過去の計算履歴を保存・閲覧できます。
- **未来的なデザイン**: 視覚的に魅力的な未来的なデザインを採用しています。

## デモ

![デモ画像](demo.png)

## インストール方法

### 必要な環境

- Python 3.7以上

### 必要なパッケージのインストール

以下のコマンドを使用して、必要なパッケージをインストールします。

```bash
pip install flask flask-login flask_sqlalchemy werkzeug
```

## アプリケーションの実行

### データベースの初期化

初回起動時に、データベースファイル `app.db` が自動的に作成されます。

### アプリケーションの起動

以下のコマンドでアプリケーションを起動します。

```bash
python app.py
```

### ブラウザでアクセス

ブラウザで以下のURLにアクセスします。

```
http://localhost:5000/
```

## 使い方

### 1. ユーザー登録

- **新規登録**: トップページから「新規登録」リンクをクリックし、ユーザー名とパスワードを入力して登録します。

### 2. ログイン

- **ログイン**: 登録したユーザー名とパスワードでログインします。

### 3. 数を作る計算機の利用

- **作りたい数字の入力**: 「作りたい数字」の入力欄に、目標とする数字を入力します。
- **4つの数字の入力**: 「数字1」から「数字4」まで、計算に使用する4つの数字を入力します。
- **計算の実行**: 「計算する」ボタンをクリックすると、計算が開始されます。計算中はアニメーションが表示されます。
- **結果の表示**: 計算が完了すると、作成可能な計算式の数と実際の計算式が表示されます。

### 4. 再度計算する

- **再度計算**: 「再度計算する」ボタンをクリックすると、入力フォームがクリアされた状態で再度計算を行うことができます。

### 5. 過去の計算履歴の閲覧

- **計算履歴の表示**: ページ下部に、これまでに行った計算の履歴が表示されます。
- **詳細の閲覧**: 各履歴の「詳細を見る」をクリックすると、そのときの計算式一覧が表示されます。

### 6. ログアウト

- **ログアウト**: ページ上部の「ログアウト」リンクをクリックすると、ログアウトできます。

## ファイル構成

```
your_project/
├── app.py                # アプリケーションのメインファイル
├── calculation.py        # 計算ロジックを含むモジュール
├── models.py             # データベースのモデルを定義
├── templates/
│   ├── base.html         # 共通のベーステンプレート
│   ├── index.html        # メインページのテンプレート
│   ├── login.html        # ログインページのテンプレート
│   └── register.html     # ユーザー登録ページのテンプレート
└── static/
    ├── style.css         # CSSスタイルシート
    └── script.js         # JavaScriptファイル
```

## コードの説明

### app.py

- Flaskアプリケーションのエントリーポイントです。
- ユーザー認証、計算機能、計算履歴の保存・表示を担当します。

### calculation.py

- 計算ロジックを実装しています。
- 入力された4つの数字とターゲットナンバーから、可能な計算式を生成します。

### models.py

- データベースのモデルを定義しています。
- `User`モデル: ユーザー情報を管理します。
- `CalculationHistory`モデル: 計算履歴を管理します。

### templates/

- **base.html**: 共通のレイアウトを定義したベーステンプレートです。
- **index.html**: メインページのテンプレートです。計算機能と計算履歴の表示を行います。
- **login.html**: ログインページのテンプレートです。
- **register.html**: ユーザー登録ページのテンプレートです。

### static/

- **style.css**: アプリケーション全体のスタイルを定義しています。
- **script.js**: クライアントサイドの動作を制御するJavaScriptコードです。

## セキュリティに関する注意

- **パスワードのハッシュ化**: ユーザーのパスワードはハッシュ化されてデータベースに保存されます。
- **セッション管理**: Flaskのセッション機能を使用して、安全なユーザー認証を実装しています。
- **`SECRET_KEY`の設定**: `app.py` 内の `SECRET_KEY` は、本番環境では安全なランダム値に変更してください。
- **`eval`関数の使用**: 計算式の評価に `eval` 関数を使用しています。ユーザーからの入力を直接評価していないため、比較的安全ですが、必要に応じて安全な数式パーサー（例: `sympy`）に置き換えてください。

## デザインについて

- **未来的なデザイン**: 背景にグラデーション、ネオンカラーのテキストとボタンを使用し、未来的な雰囲気を演出しています。
- **レスポンシブデザイン**: CSSを調整して、さまざまな画面サイズで見やすいレイアウトにしています。
- **アニメーション**: 計算中のアニメーションやボタンのホバーエフェクトを追加し、ユーザー体験を向上させています。

## カスタマイズ

- **フォントの変更**: `style.css` のフォント設定を変更することで、雰囲気を変えることができます。
- **色の変更**: CSSのカラーコードを変更して、配色をカスタマイズできます。
- **計算ロジックの拡張**: `calculation.py` を編集して、演算子や数字の数を増やすなど、機能を拡張できます。

## ライセンス

このプロジェクトはMITライセンスの下で提供されています。

## 作者

- **名前**: [あなたの名前]
- **連絡先**: [あなたのメールアドレス]

## 貢献

バグの報告や機能の提案などがありましたら、お気軽に連絡してください。

---

**ご利用いただきありがとうございます。**